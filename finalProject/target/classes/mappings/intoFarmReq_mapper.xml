<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="co.finalproject.farm.app.intoTheFarm.service.impl.IntoFarmReqMapper">
	
	<!--전체조회  -->
	<select id="getReqFarmList" resultType="IntoFarmReqVO">
		SELECT INTO_REQ_NUM
			   ,USER_ID
			   ,INTO_REQ_PHONE
			   ,INTO_REQ_ENTRY
			   ,INTO_REQ_REWARD
			   ,INTO_REQ_DATE
			   ,INTO_NO
		FROM INTOFARM_REQ
		ORDER BY INTO_REQ_NUM DESC
	</select>
	
   <!--단건조회  -->
   <select id="getSearchReqFarm" resultType="IntoFarmReqVO">
	SELECT INTO_REQ_NUM
			   ,USER_ID
			   ,INTO_REQ_PHONE
			   ,INTO_REQ_ENTRY
			   ,INTO_REQ_REWARD
			   ,INTO_REQ_DATE
			   ,INTO_NO
	FROM INTOFARM_REQ
	WHERE INTOFARM_REQ=#{intofarm_req}
	</select>
   
   <!--등록 -->
   <insert id="insertReqFarm" parameterType="IntoFarmReqVO">
   
   <selectKey keyProperty="into_req_num" resultType="string" order="BEFORE">
      SELECT NVL(MAX(INTO_REQ_NUM),1)+1 FROM INTOFARM_REQ
   </selectKey>
   INSERT INTO INTOFARM_REQ 
            ( INTO_REQ_NUM
			  ,USER_ID
			  ,INTO_REQ_PHONE
			  ,INTO_REQ_ENTRY
			   <if test="INTO_REQ_REWARD != null and INTO_REQ_REWARD != ''">	
			  ,INTO_REQ_REWARD
			  </if>
			  ,INTO_REQ_DATE
			  ,INTO_NO
             )
   VALUES ( #{into_req_num}
         	,#{user_id}
         	,#{into_req_phone}
            ,#{into_req_entry}
            <if test="INTO_REQ_REWARD != null and INTO_REQ_REWARD != ''">	
            ,#{into_req_reward}
             </if>
            ,#{into_req_date}
            ,#{into_no}
            )
   </insert>
   
   <!--수정 -->
   <update id="updateReqFarm" parameterType="IntoFarmReqVO">
   UPDATE INTOFARM_REQ
   	<set>
   	<if test="INTO_REQ_REWARD != null and INTO_REQ_REWARD != ''">	
		,INTO_REQ_REWARD=#{into_req_reward}
	</if>
   	</set>
   WHERE INTO_REQ_REWARD=#{into_req_num}
   </update>
   
   <!--삭제 -->
   <delete id="deleteReqFarm" parameterType="IntoFarmReqVO">
	DELETE FROM INTOFARM_REQ 
	WHERE INTO_REQ_REWARD=#{into_req_num}
	</delete>
</mapper>